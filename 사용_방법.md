# ESS HMI 시스템 사용 방법

## 🚀 빠른 시작

### 1. 시스템 실행

**방법 1: 배치 파일 사용 (권장)**

1. `START_HMI.bat` 파일을 찾습니다
2. **마우스 오른쪽 버튼 클릭** → **"관리자 권한으로 실행"** 선택
3. 3개의 창이 자동으로 열립니다:
   - PLC 시뮬레이터 창
   - 백엔드 서버 창
   - 프론트엔드 창

**방법 2: 수동 실행**

각 창을 따로 실행하려면:

1. **시뮬레이터 실행** (관리자 권한 필요):
   ```
   cd backend
   venv\Scripts\python.exe ..\simulator\plc_simulator.py
   ```

2. **백엔드 실행**:
   ```
   cd backend
   venv\Scripts\python.exe main.py
   ```

3. **프론트엔드 실행**:
   ```
   cd frontend
   npm run dev
   ```

### 2. 브라우저에서 접속

1. 브라우저를 열고 주소창에 입력:
   ```
   http://localhost:3000
   ```

2. 실시간 데이터가 표시됩니다:
   - 온도 센서 (TX1, TX2, TX3, TX4A, TX5A, TX4B, TX5B)
   - 압력 센서 (PX1)
   - M/E 부하 (PU1)
   - 해수 펌프 (SWP1, SWP2, SWP3)
   - 청수 펌프 (FWP1, FWP2, FWP3)

### 3. 시스템 종료

- 각 창을 닫거나 `Ctrl + C`를 눌러 종료합니다
- 또는 작업 관리자에서 Python/Node 프로세스를 종료합니다

## 📋 포트 정보

- **시뮬레이터**: 127.0.0.1:502 (Modbus TCP)
- **백엔드 API**: http://localhost:8000
- **프론트엔드**: http://localhost:3000

## ⚠️ 문제 해결

### 데이터가 0으로 표시되는 경우

1. **시뮬레이터 창 확인**:
   - 5초마다 상태 정보가 출력되는지 확인
   - M/E Load, 펌프 주파수 등이 표시되어야 함

2. **백엔드 창 확인**:
   - "PLC 연결 성공" 메시지가 있는지 확인
   - 에러 메시지가 없는지 확인

3. **브라우저 새로고침**:
   - `Ctrl + Shift + R` (강력 새로고침)

### 포트가 이미 사용 중인 경우

- 이전에 실행한 프로세스를 종료:
  ```
  taskkill /F /IM python.exe
  taskkill /F /IM node.exe
  ```

### 관리자 권한 오류

- `START_HMI.bat`를 반드시 **관리자 권한으로 실행**해야 합니다
- 502번 포트는 관리자 권한이 필요합니다

## 📊 기능

- ✅ 실시간 센서 데이터 모니터링 (1초 간격)
- ✅ 펌프 상태 모니터링
- ✅ WebSocket을 통한 실시간 업데이트
- ✅ 반응형 웹 인터페이스

## 🔧 개발 모드

개발 중에는 각 서비스를 별도로 실행할 수 있습니다:

- 시뮬레이터만: `backend\venv\Scripts\python.exe simulator\plc_simulator.py`
- 백엔드만: `cd backend && venv\Scripts\python.exe main.py`
- 프론트엔드만: `cd frontend && npm run dev`

## 📝 참고사항

- 시뮬레이터는 가상 데이터를 생성합니다 (실제 PLC 없이 테스트 가능)
- 실제 PLC와 연결하려면 `backend/modbus_client.py`의 호스트/포트를 변경하세요
- 프론트엔드 빌드: `cd frontend && npm run build`


